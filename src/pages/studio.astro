---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Editor from '../components/Editor';

import { isAuthenticated, getUserFromCookies } from "@/utils/auth";

const isLoggedIn = isAuthenticated(Astro.cookies);

if (!isLoggedIn) {
  return Astro.redirect("/");
}

const user = await getUserFromCookies(Astro.cookies, Astro.redirect);

if (!user) return Astro.redirect("/");
---

<BaseLayout title="Studio">
  <Editor client:visible />
</BaseLayout>

<style>
  @import "../styles/_variables.scss";
  @import "../styles/_keyframe-animations.scss";
</style>
