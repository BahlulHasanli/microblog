---
import BaseLayout from "@/layouts/BaseLayout.astro";
import ContactForm from "@/components/contact/ContactForm.svelte";
import { isAuthenticated } from "@/utils/auth";
import { getUserFromCookies } from "@/utils/auth";

const isLoggedIn = isAuthenticated(Astro.cookies);
let userFullName = "";

if (isLoggedIn) {
  const user = await getUserFromCookies(Astro.cookies, () => null);
  if (user) {
    userFullName = user.fullname;
  }
}
---

<BaseLayout>
  <section class="max-w-3xl mx-auto py-8 px-4 sm:px-0">
    <div class="bg-white rounded-lg p-4">
      <!-- Başlıq -->
      <div class="mb-8">
        <h1 class="text-3xl font-nouvelr-semibold text-base-900 mb-2">
          Əlaqə
        </h1>
        <p class="text-base-600 text-sm mt-4">
            Redaktor və idarəçi komandamıza fikrinizi bildirmək istəyirsinizsə, aşağıdakı formu doldura və ya <a href="mailto:contact@the99.az" class="text-rose-500 hover:text-rose-600 transition-colors font-normal!">we@the99.az</a> ünvanına yaza bilərsiniz.
        </p>
      </div>

      <!-- Form Component -->
      <ContactForm client:load isLoggedIn={isLoggedIn} userFullName={userFullName} />
    </div>
  </section>
</BaseLayout>
