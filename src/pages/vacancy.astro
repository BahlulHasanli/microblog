---
import BaseLayout from "@/layouts/BaseLayout.astro";
import VacancyForm from "@/components/vacancy/VacancyForm.svelte";
import { isAuthenticated } from "@/utils/auth";
import { getUserFromCookies } from "@/utils/auth";

const isLoggedIn = isAuthenticated(Astro.cookies);
let userFullName = "";

if (isLoggedIn) {
  const user = await getUserFromCookies(Astro.cookies, () => null);
  if (user) {
    userFullName = user.fullname || "";
  }
}
---

<BaseLayout>
  <section class="max-w-3xl mx-auto py-8 px-4 sm:px-0">
    <div class="bg-white rounded-lg p-4">
      <!-- Başlıq -->
      <div class="mb-8">
        <h1 class="text-3xl font-big-shoulders font-bold text-base-900 mb-2">
          Vakansiya
        </h1>
      </div>

      <!-- Məzmun -->
      <div class="prose prose-sm max-w-none text-slate-500! font-display space-y-4 text-light! *:mt-5! *:text-[15px]">
        <p class="text-base leading-relaxed">
          The99-da yazmağa, düşünməyə və araşdırmağa həvəsi olan istedadlara həmişə yer var. Əgər pop-mədəniyyət, oyunlar, filmlər, trend mövzular və ümumən maraq dairənizdə olanları paylaşmaqdan zövq alırsınızsa — siz tam doğru yerdəsiniz.
        </p>

        <p class="text-base leading-relaxed">
          Düşünürsünüzsə ki, özünüzü məhz bizim platformada sınamalısınız, sadəcə aşağıdakı mətn bölməsini doldurun, adınızı və e-poçtunuzu qeyd edin və Enter-ə basın.
        </p>

        <p class="text-base leading-relaxed">
          Daha təcrübəli və peşəkar yazar olduğunuzu hesab edirsinizsə, birbaşa <a href="mailto:we@the99.az" class="text-rose-500 hover:text-rose-600 transition-colors font-medium">we@the99.az</a> ünvanına yaza bilərsiniz.
        </p>
      </div>

      <!-- Form Component -->
      <VacancyForm client:load isLoggedIn={isLoggedIn} userFullName={userFullName} />
    </div>
  </section>
</BaseLayout>
