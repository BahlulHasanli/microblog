---
import { useTranslations, type Locale } from "@/utils/i18n";

const { locale = 'az' as Locale } = Astro.props;
const t = useTranslations(locale);
---

<!-- Footer -->
<footer class="max-w-3xl mx-auto text-base-800 bg-base-50 p-4 sm:p-6 md:p-8 rounded-lg sm:rounded-xl lg:p-10 my-6 sm:my-8 md:my-10">
  <div class="mx-auto max-w-6xl flex justify-center flex-col items-center gap-3 sm:gap-5">
    <ul class="flex flex-wrap justify-center gap-2 sm:gap-4 md:gap-6">
      <li><a href="/about" class="text-[11px] sm:text-[12px] md:text-[13px] hover:text-base-700/80 font-semibold">{t.footer.about}</a></li>
      <li><a href="/contact" class="text-[11px] sm:text-[12px] md:text-[13px] hover:text-base-700/80 font-semibold">{t.footer.contact}</a></li>
      <li><a href="/adv" class="text-[11px] sm:text-[12px] md:text-[13px] hover:text-base-700/80 font-semibold">{t.footer.advertising}</a></li>
      <li><a href="/vacancy" class="text-[11px] sm:text-[12px] md:text-[13px] hover:text-base-700/80 font-semibold">{t.footer.vacancy}</a></li>
      <li><a href="/squad" class="text-[11px] sm:text-[12px] md:text-[13px] hover:text-base-700/80 font-semibold">{t.footer.squad}</a></li>
      <li class="relative">
        <button
        id="random-post-btn"
        aria-label={t.footer.randomPost}
        class="text-lg cursor-pointer absolute -top-2 sm:text-xl md:text-3xl hover:text-base-700 font-semibold"
        title={t.footer.randomPost}
      >
        üé≤
      </button></li>
      <!-- <li><a href="/premieres" class="text-[11px] sm:text-[12px] md:text-[13px] hover:text-base-700/80 font-semibold">Bƒ∞R ≈ûEY VAR?</a></li> -->
    </ul>

    <p class="text-[10px] sm:text-[11px] md:text-[12px] text-base-700 text-center cursor-default px-2">
      1999 - 2025 {t.footer.copyright}
    </p>

    <div class="bg-base-200/40 text-base-700 text-[10px] sm:text-[11px] md:text-[12px] px-3 sm:px-5 py-1 rounded-full cursor-default">
      {t.footer.ageWarning}
    </div>
  </div>
</footer>

<script>
  import { navigate } from 'astro:transitions/client';

  function setupRandomButton() {
    const randomBtn = document.getElementById('random-post-btn');
    if (!randomBtn) return;

    randomBtn.addEventListener('click', async () => {
      try {
        const response = await fetch('/api/posts/random');
        if (response.ok) {
          const data = await response.json();
          if (data.slug) {
            navigate(`/posts/${data.slug}`);
          }
        }
      } catch (error) {
        console.error('Random m…ôqal…ô y√ºkl…ôm…ôsi x…ôtasƒ±:', error);
      }
    });
  }

  setupRandomButton();
  document.addEventListener('astro:after-swap', setupRandomButton);
</script>