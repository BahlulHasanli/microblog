---
interface Props {
  activeTab?: 'weekly' | 'gossip' | 'window';
}

const { activeTab = 'weekly' } = Astro.props;
---

<ul id="main-tabs" class="flex justify-between w-full mb-12 sm:mb-15 gap-2 sm:gap-4">
  <li data-tab="weekly" class={`cursor-pointer text-xl sm:text-2xl md:text-4xl text-balance max-w-40 sm:max-w-60 transition-colors duration-200 ${activeTab === 'weekly' ? 'text-slate-900' : 'font-light font-display text-slate-200'}`}>
    <div class="font-nouvelr-semibold">Həftəbécər</div>
  </li>
  <li data-tab="gossip" class={`cursor-pointer text-xl sm:text-2xl md:text-4xl text-right text-balance max-w-40 sm:max-w-60 transition-colors duration-200 ${activeTab === 'gossip' ? 'text-slate-900' : 'font-light font-display text-slate-200'}`}>
    <div class="font-nouvelr-semibold">Dédi-qodu</div>
  </li>
  <li data-tab="window" class={`cursor-pointer text-center text-xl sm:text-2xl md:text-4xl text-balance max-w-40 sm:max-w-60 transition-colors duration-200 ${activeTab === 'window' ? 'text-slate-900' : 'font-light font-display text-slate-200'}`}>
    <div class="font-nouvelr-semibold">Pəncərələr</div>
  </li>
</ul>

<script>
  import { navigate } from 'astro:transitions/client';

  document.addEventListener('astro:page-load', () => {
    const tabs = document.querySelectorAll('#main-tabs [data-tab]');
    
    // Aktif tab-ı tap
    let activeTabId = 'weekly';
    const currentPath = window.location.pathname;
    if (currentPath === '/shares') {
      activeTabId = 'gossip';
    } else if (currentPath === '/windows') {
      activeTabId = 'window';
    }

    // Tab click handler
    const handleTabClick = (tabId: string) => {
      let url = '/';
      if (tabId === 'gossip') {
        url = '/shares';
      } else if (tabId === 'window') {
        url = '/windows';
      }
      navigate(url);
    };

    // Hover handler
    const handleHover = (hoveredTabId: string) => {
      tabs.forEach(t => {
        if (t.getAttribute('data-tab') === hoveredTabId) {
          t.classList.remove('text-slate-200', 'font-light', 'font-display');
          t.classList.add('text-slate-900');
        } else {
          t.classList.add('text-slate-200', 'font-light', 'font-display');
          t.classList.remove('text-slate-900');
        }
      });
    };

    // Mouseleave handler
    const handleMouseLeave = () => {
      tabs.forEach(t => {
        const tabId = t.getAttribute('data-tab');
        if (tabId === activeTabId) {
          t.classList.remove('text-slate-200', 'font-light', 'font-display');
          t.classList.add('text-slate-900');
        } else {
          t.classList.add('text-slate-200', 'font-light', 'font-display');
          t.classList.remove('text-slate-900');
        }
      });
    };

    // Event listeners
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const tabId = tab.getAttribute('data-tab');
        if (tabId) handleTabClick(tabId);
      });

      tab.addEventListener('mouseenter', () => {
        const tabId = tab.getAttribute('data-tab');
        if (tabId) handleHover(tabId);
      });

      tab.addEventListener('mouseleave', handleMouseLeave);
    });
  });
</script>
